<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head></head>

<body>

	<div th:fragment="reviewRating(starsNum)" th:remove="tag">
		
		<th:block th:if="${starsNum == 5}">
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-solid fa-star text-warning"></i>
		</th:block>
		<th:block th:if="${starsNum == 4}">
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-regular fa-star"></i>
		</th:block>
		<th:block th:if="${starsNum == 3}">
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-regular fa-star"></i>
			<i class="fa fa-regular fa-star"></i>
		</th:block>
		<th:block th:if="${starsNum == 2}">
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-regular fa-star"></i>
			<i class="fa fa-regular fa-star"></i>
			<i class="fa fa-regular fa-star"></i>
		</th:block>
		<th:block th:if="${starsNum == 1}">
			<i class="fa fa-solid fa-star text-warning"></i>
			<i class="fa fa-regular fa-star"></i>
			<i class="fa fa-regular fa-star"></i>
			<i class="fa fa-regular fa-star"></i>
			<i class="fa fa-regular fa-star"></i>
		</th:block>
		<th:block th:if="${starsNum == 0}">
			<i class="fa fa-regular fa-star"></i>
			<i class="fa fa-regular fa-star"></i>
			<i class="fa fa-regular fa-star"></i>
			<i class="fa fa-regular fa-star"></i>
			<i class="fa fa-regular fa-star"></i>
		</th:block>
		
	</div>
	
	<div th:fragment="ratingCard" th:remove="tag">
		<div class="card border-0">
		  <div class="card-body">
		  
		  	<div th:if="${isProductReviewed}" class="row d-flex align-items-center">
   				<span class="text-success">You already reviewed this product.</span>
   			</div>
		  	
	    	<div class="row d-flex align-items-center">
   				<div class="col-auto">
   					<input class="rating-star" type="text" th:value="${product.averageRating}">
   				</div>
   				<div class="col-auto">
   					<span class="fw-bold">
   						<span th:text="${product.averageRating}" th:id="ratingNumber"></span>
   						out of 5
   					</span>
   				</div>
   			</div>
   			
   			<div class="row d-flex align-items-center">
   				<span class="text-secondary">Based on [[${product.reviewCount}]] rating(s)</span>
   			</div>
   			
   			<a th:each="percent : ${percentages}" class="progress-link"
   				th:href="@{'/review/ratings/'+${percent['key']}+'/'+${product.alias}+'/page/1?sortField=createdTime&sortDir=desc'}">
   			<div class="row mt-2 d-flex align-items-start">
   				<div class="col-1">
   					<span>[[${percent['key']}]]</span>
   				</div>
   				<div class="col-7">
   					<div th:replace="product/rating-count-details :: rating-progress(${percent['value']})"></div>
   				</div>
   				<div class="col-3">
   					<span>[[${percent['value']}]]%</span>
   				</div>
   			</div>
   			</a>
   			
   			<a th:if="${product.reviewCount > 0}" class="all-reviews-link" th:href="@{'/review/ratings/all/'+${product.alias}}">
  				See all reviews <small>&gt;</small>
  			</a>
  			
  			<div th:if="${canReview}" class="row d-flex align-items-center">
  				<hr class="mt-3">
  				<div>
	  				<h4>Review this product</h4>
	   				<p>
	   					You purchased this product<br>
	   					Share your opinion with other customers
	   				</p>
	   				<a th:href="@{'/review/write_review/product/'+${product.id}}" class="btn btn-outline-secondary">Write a customer review</a>
   				</div>
   			</div>
  			
		  </div>
		</div>
	</div>

	<div th:fragment="reviewCard" th:remove="tag">
		<div class="card border-0">
			<div class="card-body">
				<div class="row d-flex align-items-center">
					<div class="col-auto">
						<img alt="user" width="40px" th:src="@{/img/no-user.jpg}">
					</div>
					<div class="col-auto">
						<span>[[${review.customer.fullName}]]</span>
					</div>
				</div>
				<div class="row d-flex align-items-center">
					<div class="col-auto">
						<input class="rating-star-review" type="text" th:value="${review.rating}">
					</div>
					<div class="col-auto">
						<span class="fw-bold">
							<a th:href="@{'/review/data/'+${review.id}}" class="headline-link">[[${review.headline}]]</a>
						</span>
					</div>
				</div>
				<div class="row d-flex align-items-center">
					<span style="color: #626565">Reviewed 
					<th:block th:if="${review.customer.country} != null">
						in [[${review.customer.country.name}]]
					</th:block>
					on 
					<div th:replace="fragments/format :: format-deliver-time(${review.createdTime})"></div>
					</span>
				</div>
				<div class="row d-flex align-items-center">
					<span style="font-weight: 500;">[[${review.comment}]]</span>
				</div>
				
				<div class="row d-flex align-items-center">
					<span style="color: #626565" class="small" th:if="${review.upVotes >= 0}">
						<span th:id="'voteCount-'+${review.id}">[[${review.upVotes}]]</span>
						<span th:if="${review.upVotes == 1}"> person </span>
						<span th:if="${review.upVotes > 1}"> people </span>
						found this helpful
					</span>
				
				</div>
				
				<div class="row d-flex align-items-center mt-2">
					<div class="col-auto">
						<a th:href="@{'/votes/vote-review/'+${review.id}+'/up'}" 
							th:id="'voteUpLink-'+${review.id}" 
							th:reviewId="${review.id}" 
							title="Vote up" 
							class="linkVoteReview link-success like-link">
								Helpful <i th:id="'thumbsUpIcon-'+${review.id}" class="fa-thumbs-up" 
										th:classappend="${review.votedUpByCurrentCustomer ? 'fas' : 'far'}"></i>
							</a>
					</div>
					<div class="col-auto">
						<span> | </span>
						<a th:href="@{'/votes/vote-review/'+${review.id}+'/down'}" 
							th:id="'voteDownLink-'+${review.id}" 
							th:reviewId="${review.id}" 
							title="Vote down" 
							class="linkVoteReview link-danger like-link ms-3">
							<i th:id="'thumbsDownIcon-'+${review.id}" class="fa-thumbs-down"
								th:classappend="${review.votedDownByCurrentCustomer ? 'fas' : 'far'}"></i>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	
</body>
</html>