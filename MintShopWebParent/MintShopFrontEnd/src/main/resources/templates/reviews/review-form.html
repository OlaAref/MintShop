<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<div th:replace="fragments/head :: head('Write Product Review')"></div>
	<link th:href="@{/css/linkStyle.css}" media="all" rel="stylesheet" type="text/css" />
	<!-- star rating css -->
	<link th:href="@{/rating-star/css/star-rating.css}" media="all" rel="stylesheet" type="text/css" />
	<link th:href="@{/rating-star/themes/krajee-svg/theme.css}" media="all" rel="stylesheet" type="text/css" />

</head>
<body class="d-flex flex-column min-vh-100">

	
	<div th:replace="fragments/navbar :: navbar-content"></div>
	
	
	<div class="wrapper m-2 min-vh-100">
	
		<!-- Page Content  -->
        <div id="content">
        	
        	<section class="mt-5">
				<div class="container">
					
			
					<h3 class="fw-bold">Write product review</h3>
			
					<hr style="border-color: white;">
					
					<div class="row">
        				<div class="col-3">
        					<img th:alt="${product.shortName}" th:src="@{${product.imagePath}}" width="100%">
        				</div>
        				<div class="col-9 ">
        					<div><h3><a th:href="@{'/p/'+${product.alias}}" class="p-link">[[${product.shortName}]]...</a></h3></div>
        					<div><span class="text-secondary">By [[${product.brand.name}]]</span></div>
        				</div>
        			</div>
        			
        			<div class="mt-5 ms-2">
        			<div th:if="${isProductReviewed}">
        				<span class="text-success fs-4 fw-bold">You already reviewed this product.</span>
        			</div>
        			
        			<div th:unless="${canReview}">
        				<span th:unless="${isProductReviewed}" class="text-danger fs-4 fw-bold">You can't review this product because you did not purchase it, or you have not receive it yet.</span>
        			</div>
        			</div>
					
					<form th:if="${canReview}" th:action="@{/review/save}" th:object="${review}" method="post">
						<div class="row">
		
							<input type="hidden" th:field="*{id}" id="reviewID">
							<input type="hidden" name="productId" th:value="${product.id}">
							
							<div class="form-group">
								<label class="form-label mt-4 fw-bold">Rating : </label> 
								<input th:field="*{rating}" class="rating-star" type="text">
							</div>
							
							<div class="form-group">
								<label class="form-label mt-4 fw-bold">Headline : </label> 
								<input th:field="*{headline}" type="text" class="form-control" minlength="10" maxlength="128" 
									placeholder="Headline or Summary" required>
							</div>
							
							<div class="form-group">
								<label class="form-label mt-4 fw-bold">Comment : </label> 
								<textarea th:field="*{comment}" type="text" class="form-control" minlength="3" 
									placeholder="comment details" rows="5" required></textarea>
							</div>
		              		
		                    <div class="d-flex justify-content-center">
		                    	<button dir="ltr" type="submit" class="btn btn-primary mt-4">Post this review</button>
		                    </div>
								
						</div>
					</form>
					
			
				</div>
			</section>
        	
        </div>
		
	</div>
	
	
	<div style="height: 500px;" class="d-none d-xl-block d-lg-block" id="bodyExtender"></div>

	<div th:replace="fragments/footer :: footer"></div>
	
	<!-- Start Scroll To Top Section -->
    <div class="scroll-top">
        <i class="fas fa-chevron-up fa-3x scroll-icon"></i>
    </div>
	
	
	<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
	<script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
	<script th:src="@{/webjars/font-awesome/js/all.min.js}"></script>
	<script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
	<script th:src="@{/js/plugins.js}"></script>
	<script th:src="@{/js/PNotify.js}"></script>
	<script th:src="@{/js/quantity-control.js}"></script>
	<script th:src="@{/js/add-to-cart.js}"></script>
	<script th:src="@{/js/jquery.number.min.js}"></script>
	
	<!-- star rating js -->
	<script th:src="@{/rating-star/js/star-rating.js}" type="text/javascript"></script>
	<script th:src="@{/rating-star/themes/krajee-svg/theme.js}" type="text/javascript"></script>
	
	<script>
		var contextPath = "[[@{/}]]";
		var csrfHeaderName = "[[${_csrf.headerName}]]";
		var csrfValue = "[[${_csrf.token}]]";
		
		$(document).ready(function() {
			
			$(".rating-star").rating({
				size: "lg",
				step: 1,
				hoverOnClear: false,
				showCaption: true,
				theme: 'krajee-svg',
				starCaptionClasses:     {
				    1: 'caption-light fs-1',
				    2: 'caption-light fs-1',
				    3: 'caption-light fs-1',
				    4: 'caption-light fs-1',
				    5: 'caption-light fs-1'
				},
				starCaptions:     {
				    1: '&#128577;',
				    2: '&#128528;',
				    3: '&#128578;',
				    4: '&#128515;',
				    5: '&#128516;'
				}
			});
		});
		
	</script>
</body>
</html>